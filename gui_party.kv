#:kivy 2.1.0
#:import * gui
#:include gui.kv

<PartyPokemonPanel>
    wazaListLabel: wazaListLabel
    statusListPanel: statusListPanel
    BoxLayout:
        canvas.before:
            Color:
                rgba: 1, 1, 1, 1
            Line:
                width: 1.5
                rectangle: self.x, self.y, self.width, self.height
        orientation: "vertical"
        spacing:5
        BoxLayout:
            size_hint_y: 1
            BoxLayout:
                orientation: "vertical"
                padding: [10,10,10,10]
                spacing: 5
                size_hint_x: 1
                Label:
                    text:root.num
                    font_size: self.height*0.5
                IconButton:
                    icon: root.icon
                    on_release: root.on_click_icon()
            BoxLayout:
                orientation: "vertical"
                padding: [10,10,10,10]
                spacing: 5
                size_hint_x: 3
                Label:
                    size_hint_y: 2
                    text: root.name
                    font_size: self.height*0.5
                BoxLayout:
                    size_hint_y: 1
                    BoxLayout:
                        Image:
                            source: root.type1_img
                        Label:
                            text:root.type1
                    BoxLayout:
                        Image:
                            source: root.type2_img
                        Label:
                            text:root.type2
                Label:
                    id: info
                    size_hint_y: 1
                    text: ""
            GridLayout:
                size_hint_x: 4
                cols: 2
                rows: 5
                spacing: 5
                padding: [10,10,10,10]
                ShortLabel:
                    text: "性格"
                DropDownButton:
                    text: root.character
                    items: root.characters
                    on_select_item: root.choose_character(self.button_text)
                ShortLabel:
                    text: "持ち物"
                DropDownButton:
                    text: root.item
                    image_enable: True
                    items: root.items
                    on_select_item: root.item = self.button_text
                ShortLabel:
                    text: "特性"
                DropDownButton:
                    text: root.ability if root.name != "" else ""
                    items: root.abilities if root.name != "" else ""
                    on_select_item: root.ability = self.button_text
                ShortLabel:
                    text: "テラス"
                IconButton:
                    icon: root.terastype_icon
                    text: root.terastype_name
                    on_release: root.select_terastype()
        BoxLayout:
            size_hint_y: 2
            spacing: 5
            padding: [10,10,10,10]
            StatusListPanel:
                id: statusListPanel
                size_hint_x: 3
            BoxLayout:
                orientation: "vertical"
                size_hint_x: 1
                Label:
                    text:"わざ"
                    size_hint_y: 1
                WazaListLabel:
                    id: wazaListLabel
                    size_hint_y: 5
<StatusPanel>
    spacing: 5
    padding: [5,5,5,5]
    Label:
        text:root.type
        size_hint_x: 1
    Label:
        id:status
        text:root.status
        size_hint_x: 1.5
    BoxLayout:
        size_hint_x: 2
        TextInput:
            id :kotai
            size_hint_x: 1.5
            text:"0"
            font_size: 0.4*self.height
            on_text: root.calc_status()
        BoxLayout:
            orientation: 'vertical'
            size_hint_x: 1
            Button:
                text:"▲"
                on_release: root.change_kotai(True)
            Button:
                text:"▼"
                on_release: root.change_kotai(False)
    Button:
        text:"0"
        size_hint_x: 1
        on_release: root.change_kotai_direct(0)
    Button:
        text:"31"
        size_hint_x: 1
        on_release: root.change_kotai_direct(31)
    Slider:
        id:slider
        size_hint_x: 5
        min: 0
        max: 252
        step: 4
        orientation: "horizontal"
        on_touch_move: root.slide_doryoku(self.value)
    BoxLayout:
        size_hint_x: 2
        TextInput:
            id :doryoku
            size_hint_x: 1.5
            text:"0"
            font_size: 0.4*self.height
            on_text: root.change_doryoku_direct(self.text)
        BoxLayout:
            orientation: 'vertical'
            size_hint_x: 1
            Button:
                text:"▲"
                on_release: root.change_doryoku(True)
            Button:
                text:"▼"
                on_release: root.change_doryoku(False)