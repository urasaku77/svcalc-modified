#:kivy 2.1.0
#:import Pokemon pokedata.pokemon.Pokemon
#:import DORYOKU_PRESET pokedata.const.DORYOKU_PRESET
#:import * gui
#:include gui.kv
#:import * gui_party
#:include gui_party.kv
#:include kivy_gui/popup.kv
#:import * textinput4ja

<PagePartyWidget>
    partyPokemonPanels: [_first,_second,_third,_forth,_fifth,_sixth]
    GridLayout:
        cols:3
        rows:3
        padding: [5, 5]
        spacing: [5, 5]
        BoxLayout:
            size_hint_y: 0.3
            BoxLayout:
                orientation: "vertical"
                size_hint_x: 1
                BoxLayout:
                    ShortLabel:
                        text:"番号"
                        size_hint_x: 1
                    AnchorLayout:
                        size_hint_x: 2
                        anchor_x:"center"
                        anchor_y:"center"
                        TextInput:
                            id: num
                            size_hint_y: None
                            text:root.num
                            height: 40
                            multiline: False
                BoxLayout:
                    ShortLabel:
                        text:"連番"
                        size_hint_x: 1
                    AnchorLayout:
                        size_hint_x: 2
                        anchor_x:"center"
                        anchor_y:"center"
                        TextInput:
                            id: sub_num
                            size_hint_y: None
                            text:root.sub_num
                            height: 40
                            multiline: False
            BoxLayout:
                orientation: "vertical"
                size_hint_x: 4
                BoxLayout:
                    ShortLabel:
                        text:"タイトル"
                        size_hint_x: 1
                    AnchorLayout:
                        size_hint_x: 6
                        anchor_x:"center"
                        anchor_y:"center"
                        TextInput_JA:
                            id: title
                            size_hint_y: None
                            text:root.title
                            height: 40
                            multiline: False
                    AnchorLayout:
                        size_hint_x: 1
                        anchor_x:"center"
                        anchor_y:"center"
                        Button:
                            size_hint_y: None
                            text: "保存"
                            height: 40
                            on_release: root.save_csv()
                BoxLayout:
                    AnchorLayout:
                        size_hint_x: 1
                        anchor_x:"right"
                        anchor_y:"center"
                        CheckBox:
                            active: root.set_default
                            on_press: root.set_default = self.active
                            size_hint_x: 1
                    AnchorLayout:
                        size_hint_x: 1
                        anchor_x:"left"
                        anchor_y:"center"
                        ShortLabel:
                            text: "使用するパーティに設定"
        BoxLayout:
            size_hint_y: 0.3
            ShortLabel:
                text:"メモ"
                size_hint_x: 1
            TextInput_JA:
                id: memo
                text:""
                size_hint_x: 5
            BoxLayout:
                orientation:"vertical"
                size_hint_x: 2
                Button:
                    text: "CSVを開く"
                    on_release: root.open_csv()
                Button:
                    text: "全クリア(確認ダイヤログなし)"
                    on_release: root.clear_party()
                    font_size: 0.3*self.height
        BoxLayout:
            size_hint_y: 0.3
            AnchorLayout:
                size_hint_x: 2
                anchor_x:"center"
                anchor_y:"center"
                Label:
                    size_hint_y: None
                    text:"使用するパーティ"
            AnchorLayout:
                size_hint_x: 4
                anchor_x:"center"
                anchor_y:"center"
                Label:
                    id: using
                    size_hint_y: None
                    text:root.using
                    height: 40
            AnchorLayout:
                size_hint_x: 1
                anchor_x:"center"
                anchor_y:"center"
                Button:
                    size_hint_y: None
                    text: "変更"
                    height: 40
                    on_release: root.change_using_csv()
        PartyPokemonPanel:
            id: _first
            num: "1"
            size_hint_y: 2
        PartyPokemonPanel:
            id: _second
            num: "2"
            size_hint_y: 2
        PartyPokemonPanel:
            id: _third
            num: "3"
            size_hint_y: 2
        PartyPokemonPanel:
            id: _forth
            num: "4"
            size_hint_y: 2
        PartyPokemonPanel:
            id: _fifth
            num: "5"
            size_hint_y: 2
        PartyPokemonPanel:
            id: _sixth
            num: "6"
            size_hint_y: 2