#:import Pokemon pokedata.pokemon.Pokemon
#:import DORYOKU_PRESET pokedata.const.DORYOKU_PRESET
#:import * gui
#:include gui.kv
#:import * gui_record
#:include gui_record.kv
#:include kivy_gui/popup.kv

RootWidget:
    orientation: "vertical"
    canvas.before:
        Color:
            rgb: (0.15, 0.15, 0.15)
        Rectangle:
            size: self.size
            pos: self.pos
    partyPanels: [party1, party2]
    activePokemonPanels: [_playerActivePokemon, _opponentActivePokemon]
    chosenPokemonPanels:[[_selfFirstChosenPokemon, _selfSecondChosenPokemon, _selfThirdChosenPokemon],[_opponentFirstChosenPokemon, _opponentSecondChosenPokemon, _opponentThirdChosenPokemon]]
    wazaListPanels: [_playerWazaList, _opponentWazaList]
    GridLayout:
        cols: 3
        padding: [5, 5]
        spacing: [5, 5]
        GridLayout:
            cols:1
            size_hint_x: 1
            BoxLayout:
                size_hint_y: None
                height: 40
                PartyIconPanel:
                    id: party1
                    on_select: root.select_party_pokemon(0, self.selected_index)
                SimpleButton:
                    text: "読取"
                SimpleButton:
                    text: "PT"
                    on_release: root.load_party()
                SimpleButton:
                    text: "編集"
                    on_release: root.edit_party(0)
            BoxLayout:
                size_hint_y: None
                height: 40
                Button:
                    text: "1"
                    on_release: root.select_chosen_pokemon(0, 0)
                Button:
                    text: "2"
                    on_release: root.select_chosen_pokemon(0, 1)
                Button:
                    text: "3"
                    on_release: root.select_chosen_pokemon(0, 2)
            ActivePokemonPanel:
                id: _playerActivePokemon
                player: 0
                size_hint_y: None
                height: 120
                on_click_icon: print(self.pokemon)
            WazaListPanel:
                id: _playerWazaList
        #CameraPreview:
        #    id: camera_preview
        #    size: root.size
        #    size_hint_x: 2
        Image:
            source: "dummy.png"
            size: root.size
            size_hint_x: 2
        GridLayout:
            cols:1
            size_hint_x: 1
            BoxLayout:
                size_hint_y: None
                height: 40
                PartyIconPanel:
                    id: party2
                    on_select: root.select_party_pokemon(1, self.selected_index)
                SimpleButton:
                    text: "検索"
                SimpleButton:
                    text: "編集"
                    on_release: root.edit_party(1)
                SimpleButton:
                    text: "クリア"
                    on_release: root.clear_party(1)
            BoxLayout:
                size_hint_y: None
                height: 40
                Button:
                    text: "1"
                    on_release: root.select_chosen_pokemon(1, 0)
                Button:
                    text: "2"
                    on_release: root.select_chosen_pokemon(1, 1)
                Button:
                    text: "3"
                    on_release: root.select_chosen_pokemon(1, 2)
            ActivePokemonPanel:
                id: _opponentActivePokemon
                player: 1
                size_hint_y: None
                height: 120
            GridLayout:
                cols:2
                padding: [0, 5]
                BoxLayout:
                    orientation: "vertical"
                    size_hint_x: 0.1
                    Button:
                        height: 40
                        on_release: root.set_opponent_waza(0)
                    Button:
                        height: 40
                        on_release: root.set_opponent_waza(1)
                    Button:
                        height: 40
                        on_release: root.set_opponent_waza(2)
                    Button:
                        height: 40
                        on_release: root.set_opponent_waza(3)
                    Button:
                        height: 40
                        on_release: root.set_opponent_waza(4)
                    Button:
                        height: 40
                        on_release: root.set_opponent_waza(5)
                    Button:
                        height: 40
                        on_release: root.set_opponent_waza(6)
                    Button:
                        height: 40
                        on_release: root.set_opponent_waza(7)
                    Button:
                        height: 40
                        on_release: root.set_opponent_waza(8)
                    Button:
                        height: 40
                        on_release: root.set_opponent_waza(9)
                WazaListPanel:
                    size_hint_x: 1
                    id: _opponentWazaList
    GridLayout:
        cols:7
        rows:5
        padding: [5, 5]
        spacing: [5, 5]
        Label:
            text: "Home情報"
            size_hint_x: 5
            size_hint_y: 2
            height: 120
        Label:
            text: "Home情報"
            size_hint_x: 5
            size_hint_y: 2
            height: 120
        Label:
            text: "対戦情報"
            size_hint_x: 5
            size_hint_y: 2
            height: 120
        Label:
            text: "対戦情報"
            size_hint_x: 3
            size_hint_y: 2
            height: 120
        Label:
            text: "対戦情報"
            size_hint_x: 5
            size_hint_y: 2
            height: 120
        Label:
            text: "Home情報"
            size_hint_x: 5
            size_hint_y: 2
            height: 120
        Label:
            text: "Home情報"
            size_hint_x: 5
            size_hint_y: 2
            height: 120
        ChosenPokemonPanel:
            id: _selfFirstChosenPokemon
            chosen_num: 0
            size_hint_x: 5
            size_hint_y: 3
            height: 120
        ChosenPokemonPanel:
            id: _selfSecondChosenPokemon
            chosen_num: 1
            size_hint_x: 5
            size_hint_y: 3
            height: 120
        ChosenPokemonPanel:
            id: _selfThirdChosenPokemon
            chosen_num: 2
            size_hint_x: 5
            size_hint_y: 3
            height: 120
        BoxLayout:
            orientation: "vertical"
            padding:[10,0,10,0]
            spacing:25
            size_hint_x: 3
            TimerLabel:
                size_hint_y: 3
            Image:
                source: "top.jpg"
                size_hint_y: 2.5
                size: root.size
            BoxLayout:
                height: 50
                size_hint_y: 1
                Button:
                    text: "登録"
                Button:
                    text: "クリア"
        ChosenPokemonPanel:
            id: _opponentFirstChosenPokemon
            chosen_num: 0
            size_hint_x: 5
            size_hint_y: 3
            height: 120
        ChosenPokemonPanel:
            id: _opponentSecondChosenPokemon
            chosen_num: 1
            size_hint_x: 5
            size_hint_y: 3
            height: 120
        ChosenPokemonPanel:
            id: _opponentThirdChosenPokemon
            chosen_num: 2
            size_hint_x: 5
            size_hint_y: 3
            height: 120
        
    Label:
        size_hint_y: None
        height: 30
        text: root.status

<SimpleButton@Button>
    size_hint_x: None
    width: 40
    font_size: 12